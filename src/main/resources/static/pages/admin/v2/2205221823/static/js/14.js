webpackJsonp([14],{"5vuo":function(t,e,i){(t.exports=i("FZ+f")(!1)).push([t.i,"\n.mod-rsco .menu-list .el-input__inner,\n.mod-rsco .menu-list .el-input__suffix,\n.mod-rsco .icon-list .el-input__inner,\n.mod-rsco .icon-list .el-input__suffix {\n  cursor: pointer;\n}\n.mod-rsco-icon-popover {\n  width: 458px;\n  overflow: hidden;\n}\n.mod-rsco-icon-inner {\n  width: 478px;\n  max-height: 258px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.mod-rsco-icon-list {\n  width: 458px;\n  padding: 0;\n  margin: -8px 0 0 -8px;\n}\n.mod-rsco-icon-list > .el-button {\n    padding: 8px;\n    margin: 8px 0 0 8px;\n}\n.mod-rsco-icon-list > .el-button > span {\n      display: inline-block;\n      vertical-align: middle;\n      width: 18px;\n      height: 18px;\n      font-size: 18px;\n}\n",""])},PP7H:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),n=i.n(a),o=i("O4Lo"),r=i.n(o),s=i("0xDb"),l={data:function(){return{id:null,visible:!1,menuListVisible:!1,menuList:[],iconListVisible:!1,iconList:[],dataForm:{id:"",pid:null,nm:"",pnm:"",url:"",perm:"",icon:"",seq:0,rmks:"",type:0},dataRule:{pnm:[{required:!0,message:"父主键不能为空",trigger:"blur"}],nm:[{required:!0,message:"名称不能为空",trigger:"blur"}],seq:[{required:!0,message:"排序不能为空",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}]}}},watch:{"dataForm.type":function(t){this.$refs.dataForm.clearValidate()}},methods:{init:function(t){var e=this;this.id=t,this.visible=!0,this.dataForm.pnm="",this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.iconList=Object(s.d)(),e.listMenu().then(function(){e.id&&e.getInfo()})})},listMenu:function(){var t=this,e=this.$query.new();return this.$query.toW(e,"type","0, 1","IN"),this.$http.get("/sys/rsco/listTreeNode?query="+this.$query.toEncode(e)).then(function(e){var i=e.data;if(0!==i.code)return t.$message.error(i.msg);t.menuList=i.data.list}).catch(function(){})},getInfo:function(){var t=this;this.$http.get("/sys/rsco/info/"+this.id).then(function(e){var i=e.data;return 0!==i.code?t.$message.error(i.msg):(t.dataForm=n()({},t.dataForm,i.data),t.dataForm.pid?void t.$refs.menuListTree.setCurrentKey(t.dataForm.pid):t.menuListTreeSetDefaultHandle())}).catch(function(){})},menuListTreeCurrentChangeHandle:function(t){this.dataForm.pid=t.id,this.dataForm.pnm=t.nm,this.menuListVisible=!1},menuListTreeSetDefaultHandle:function(){this.dataForm.pid=null,this.dataForm.pnm=""},iconListCurrentChangeHandle:function(t){this.dataForm.icon=t,this.iconListVisible=!1},dataFormSubmit:r()(function(){var t=this;console.log(this.dataForm),this.$refs.dataForm.validate(function(e){if(e){var i=t.id?"/sys/rsco/upd":"/sys/rsco/add";t.$http.post(i,n()({},t.dataForm)).then(function(e){var i=e.data;i&&0===i.code?t.$message({message:"操作成功",type:"success",duration:500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(i.msg)})}})},1e3,{leading:!0,trailing:!1})}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[i("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"120px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.dataFormSubmit()}}},[i("el-row",{attrs:{gutter:20}},[i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"类型",prop:"type"}},[i("el-radio-group",{attrs:{disabled:t.id>0},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},[i("el-radio",{attrs:{label:0}},[t._v("菜单")]),t._v(" "),i("el-radio",{attrs:{label:1}},[t._v("功能")]),t._v(" "),i("el-radio",{attrs:{label:2}},[t._v("伪菜单")])],1)],1)],1),t._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{staticClass:"menu-list",attrs:{prop:"pid",label:"上级菜单"}},[i("el-popover",{ref:"menuListPopover",attrs:{placement:"bottom-start",trigger:"click"},model:{value:t.menuListVisible,callback:function(e){t.menuListVisible=e},expression:"menuListVisible"}},[i("el-tree",{ref:"menuListTree",attrs:{data:t.menuList,props:{label:"nm",children:"children"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:""},on:{"current-change":t.menuListTreeCurrentChangeHandle}})],1),t._v(" "),i("el-input",{directives:[{name:"popover",rawName:"v-popover:menuListPopover",arg:"menuListPopover"}],attrs:{readonly:!0,placeholder:"上级菜单"},model:{value:t.dataForm.pnm,callback:function(e){t.$set(t.dataForm,"pnm",e)},expression:"dataForm.pnm"}},[t.dataForm.pid?i("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:function(e){e.stopPropagation(),t.menuListTreeSetDefaultHandle()}},slot:"suffix"}):t._e()])],1)],1),t._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"名称",prop:"nm"}},[i("el-input",{attrs:{placeholder:"名称"},model:{value:t.dataForm.nm,callback:function(e){t.$set(t.dataForm,"nm",e)},expression:"dataForm.nm"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"排序",prop:"seq"}},[i("el-input-number",{attrs:{min:1,max:1e4,label:"排序"},model:{value:t.dataForm.seq,callback:function(e){t.$set(t.dataForm,"seq",e)},expression:"dataForm.seq"}})],1)],1),t._v(" "),i("el-col",{attrs:{span:22}},[1===t.dataForm.type?i("el-form-item",{attrs:{label:"资源路径",prop:"url"}},[i("el-input",{attrs:{placeholder:"资源路径"},model:{value:t.dataForm.url,callback:function(e){t.$set(t.dataForm,"url",e)},expression:"dataForm.url"}})],1):t._e()],1),t._v(" "),2!==t.dataForm.type?i("el-col",{attrs:{span:22}},[i("el-form-item",{attrs:{label:"权限标识",prop:"perm"}},[i("el-input",{attrs:{placeholder:"权限标识"},model:{value:t.dataForm.perm,callback:function(e){t.$set(t.dataForm,"perm",e)},expression:"dataForm.perm"}})],1)],1):t._e(),t._v(" "),0===t.dataForm.type?i("el-col",{attrs:{span:11}},[i("el-form-item",{staticClass:"icon-list",attrs:{prop:"icon",label:"图标"}},[i("el-popover",{ref:"iconListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"mod-rsco-icon-popover"},model:{value:t.iconListVisible,callback:function(e){t.iconListVisible=e},expression:"iconListVisible"}},[i("div",{staticClass:"mod-rsco-icon-inner"},[i("div",{staticClass:"mod-rsco-icon-list"},t._l(t.iconList,function(e,a){return i("el-button",{key:a,class:{"is-active":t.dataForm.icon===e},on:{click:function(i){t.iconListCurrentChangeHandle(e)}}},[i("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[i("use",{attrs:{"xlink:href":"#"+e}})])])}))])]),t._v(" "),i("el-input",{directives:[{name:"popover",rawName:"v-popover:iconListPopover",arg:"iconListPopover"}],attrs:{readonly:!0,placeholder:"图标"},model:{value:t.dataForm.icon,callback:function(e){t.$set(t.dataForm,"icon",e)},expression:"dataForm.icon"}})],1)],1):t._e(),t._v(" "),i("el-col",{attrs:{span:11}},[i("el-form-item",{attrs:{label:"备注",prop:"rmks"}},[i("el-input",{attrs:{placeholder:"备注"},model:{value:t.dataForm.rmks,callback:function(e){t.$set(t.dataForm,"rmks",e)},expression:"dataForm.rmks"}})],1)],1)],1)],1),t._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var d=i("VU/8")(l,c,!1,function(t){i("Yhxd")},null,null);e.default=d.exports},Yhxd:function(t,e,i){var a=i("5vuo");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("157f3223",a,!0)}});