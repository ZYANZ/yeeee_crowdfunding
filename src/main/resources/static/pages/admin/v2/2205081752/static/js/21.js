webpackJsonp([21,39,40],{"/mIH":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),o=a.n(r),i=a("O4Lo"),l={data:function(){var e=this;return{id:null,visible:!1,dataForm:{jobName:"",jobGroup:"default",jobDesc:"",cronExpression:"",triggerDesc:""},dataRule:{jobName:[{required:!0,message:"任务编码不能为空",trigger:"blur"},{validator:function(t,a,r){!e.id&&/[\u4E00-\u9FA5]/.test(a)?r(new Error("不能输入中文汉字")):r()},trigger:"blur"}],jobGroup:[{required:!0,message:"任务组不能为空",trigger:"blur"}],jobDesc:[{required:!0,message:"任务URL不能为空",trigger:"blur"}],cronExpression:[{required:!0,message:"时间表达式不能为空",trigger:"blur"}]}}},methods:{init:function(e,t){var a=this;this.id=null,this.visible=!0,this.$nextTick(function(){a.$refs.dataForm.resetFields(),t&&(a.dataForm.jobGroup=t),e&&(a.id=1,a.dataForm.jobName=e),a.id&&a.getInfo()})},getInfo:function(){var e=this;this.$http.get("/sched/qrtz/info",{params:{jobName:this.dataForm.jobName,jobGroup:this.dataForm.jobGroup}}).then(function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=o()({},e.dataForm,a.data)}).catch(function(){})},dataFormSubmit:a.n(i)()(function(){var e=this;this.$refs.dataForm.validate(function(t){if(t){var a=e.id?"/sched/qrtz/updJob":"/sched/qrtz/addJob";e.$http.post(a,o()({},e.dataForm)).then(function(t){var a=t.data;a&&0===a.code?e.$message({message:"操作成功",type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(a.msg)})}})},1e3,{leading:!0,trailing:!1})}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"mod-qrtz-edit",attrs:{title:e.id?"修改":"新增","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.dataFormSubmit()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务编码",prop:"jobName"}},[a("el-input",{attrs:{placeholder:"如: testTask",disabled:e.id>0},model:{value:e.dataForm.jobName,callback:function(t){e.$set(e.dataForm,"jobName",t)},expression:"dataForm.jobName"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务组",prop:"jobGroup"}},[a("el-input",{attrs:{placeholder:"任务组"},model:{value:e.dataForm.jobGroup,callback:function(t){e.$set(e.dataForm,"jobGroup",t)},expression:"dataForm.jobGroup"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"任务URL",prop:"jobDesc"}},[a("el-input",{attrs:{placeholder:"任务URL"},model:{value:e.dataForm.jobDesc,callback:function(t){e.$set(e.dataForm,"jobDesc",t)},expression:"dataForm.jobDesc"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"时间表达式",prop:"cronExpression"}},[a("el-input",{attrs:{placeholder:"如: 0 0 12 * * ?"},model:{value:e.dataForm.cronExpression,callback:function(t){e.$set(e.dataForm,"cronExpression",t)},expression:"dataForm.cronExpression"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注",prop:"triggerDesc"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.dataForm.triggerDesc,callback:function(t){e.$set(e.dataForm,"triggerDesc",t)},expression:"dataForm.triggerDesc"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]},n=a("VU/8")(l,s,!1,null,null,null);t.default=n.exports},"2dEu":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),o=a.n(r),i={data:function(){return{id:null,jobName:"",jobGroup:"",visible:!1,dataForm:{}}},methods:{init:function(e,t){var a=this;this.id=1,this.jobName=e,this.jobGroup=t,this.visible=!0,this.$nextTick(function(){a.id&&a.getInfo()})},getInfo:function(){var e=this;this.$http.get("/sched/qrtz/info",{params:{jobName:this.jobName,jobGroup:this.jobGroup}}).then(function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=o()({},e.dataForm,a.data)}).catch(function(){})}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{staticClass:"mod-qrtz-info",attrs:{title:"详情","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,"label-width":"120px"}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务编码:"}},[a("label",[e._v(e._s(e.dataForm.jobName))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务组:"}},[a("label",[e._v(e._s(e.dataForm.jobGroup))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务URL:"}},[a("label",[e._v(e._s(e.dataForm.jobDesc))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"时间表达式:"}},[a("label",[e._v(e._s(e.dataForm.cronExpression))])])],1),e._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"备注:"}},[a("label",[e._v(e._s(e.dataForm.triggerDesc))])])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")])],1)],1)},staticRenderFns:[]},s=a("VU/8")(i,l,!1,null,null,null);t.default=s.exports},"HJK+":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("/mIH"),o=a("2dEu"),i={mixins:[a("u7jc").a],data:function(){return{module:"/sched/qrtz/",gridOptions:{isQuery:!1,isPage:!1,listUrl:"/sched/qrtz/listJobs"}}},components:{edit:r.default,info:o.default},methods:{listData2:function(){var e=this;this.dataListLoading=!0,this.$http.get(this.gridOptions.listUrl,{}).then(function(t){var a=t.data;if(0!==a.code)return e.dataList=[],e.total=0,e.$message.error(a.msg);var r=a.data.list;(e.dataForm.jobName||e.dataForm.triggerState)&&(r=r.filter(function(t){return e.dataForm.jobName&&e.dataForm.triggerState?-1!==t.jobName.indexOf(e.dataForm.jobName)&&t.triggerState===e.dataForm.triggerState:e.dataForm.jobName?-1!==t.jobName.indexOf(e.dataForm.jobName):e.dataForm.triggerState?t.triggerState===e.dataForm.triggerState:void 0})),e.dataList=r,e.dataListLoading=!1}).catch(function(){e.dataListLoading=!1})},editHandle:function(e,t){var a=this;this.editVisible=!0,this.$nextTick(function(){a.$refs.edit.init(e,t)})},infoHandle:function(e,t){var a=this;this.infoVisible=!0,this.$nextTick(function(){a.$refs.info.init(e,t)})},delHandle:function(e,t){var a={url:"/sched/qrtz/deleteJob",message:"删除",params:{jobName:e,jobGroup:t}};this.baseHandle(a)},triggerHandle:function(e,t){var a={url:"/sched/qrtz/triggerJob",message:"立刻运行一次",params:{jobName:e,jobGroup:t}};this.baseHandle(a)},resumeHandle:function(e,t){var a={url:"/sched/qrtz/resumeJob",message:"恢复任务",params:{jobName:e,jobGroup:t}};this.baseHandle(a)},pauseHandle:function(e,t){var a={url:"/sched/qrtz/pauseJob",message:"暂停任务",params:{jobName:e,jobGroup:t}};this.baseHandle(a)}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mod-qrtz"},[a("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.listData2()}}},[a("el-form-item",[a("el-form-item",[a("el-input",{attrs:{placeholder:"编码",clearable:""},model:{value:e.dataForm.jobName,callback:function(t){e.$set(e.dataForm,"jobName",t)},expression:"dataForm.jobName"}})],1),e._v(" "),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"状态"},model:{value:e.dataForm.triggerState,callback:function(t){e.$set(e.dataForm,"triggerState",t)},expression:"dataForm.triggerState"}},[a("el-option",{attrs:{label:"正常",value:"NORMAL"}}),e._v(" "),a("el-option",{attrs:{label:"暂停",value:"PAUSED"}})],1)],1),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:function(t){e.listData2()}}},[e._v("查询")]),e._v(" "),e.$hasPerm("sched:qrtz:add")?a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.editHandle()}}},[e._v("添加任务")]):e._e()],1)],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",stripe:"","max-height":e.tableHeight},on:{"selection-change":e.selectionChangeHandle,"sort-change":e.sortChangeHandle}},[a("el-table-column",{attrs:{prop:"jobName",label:"任务编码","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"jobDesc",label:"任务URL","header-align":"center",align:"center",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"cronExpression",label:"时间表达式","header-align":"center",align:"center",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"triggerDesc",label:"描述","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"triggerState",label:"状态","header-align":"center",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return["PAUSED"===t.row.triggerState?a("el-tag",{attrs:{size:"small",type:"warning"}},[e._v("暂停")]):"NORMAL"===t.row.triggerState?a("el-tag",{attrs:{size:"small",type:"success"}},[e._v("正常")]):a("el-tag",{attrs:{size:"small",type:"info"}},[e._v(e._s(t.row.triggerState))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"nextFireTime",label:"下次触发时间","header-align":"center",align:"center",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{prop:"previousFireTime",label:"上次触发时间","header-align":"center",align:"center",width:"140"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right","header-align":"center",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.$hasPerm("sched:qrtz:info")?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-document",title:"详情"},on:{click:function(a){e.infoHandle(t.row.jobName,t.row.jobGroup)}}}):e._e(),e._v(" "),e.$hasPerm("sched:qrtz:upd")?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-edit",title:"编辑"},on:{click:function(a){e.editHandle(t.row.jobName,t.row.jobGroup)}}}):e._e(),e._v(" "),e.$hasPerm("sched:qrtz:del")?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-delete",title:"删除"},on:{click:function(a){e.delHandle(t.row.jobName,t.row.jobGroup)}}}):e._e(),e._v(" "),e.$hasPerm("sched:qrtz:exec")?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-news",title:"立刻运行一次"},on:{click:function(a){e.triggerHandle(t.row.jobName,t.row.jobGroup)}}}):e._e(),e._v(" "),e.$hasPerm("sched:qrtz:resume")?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-star-on",title:"恢复任务"},on:{click:function(a){e.resumeHandle(t.row.jobName,t.row.jobGroup)}}}):e._e(),e._v(" "),e.$hasPerm("sched:qrtz:pause")?a("el-button",{attrs:{type:"text",size:"small",icon:"el-icon-star-off",title:"暂定任何"},on:{click:function(a){e.pauseHandle(t.row.jobName,t.row.jobGroup)}}}):e._e()]}}])})],1),e._v(" "),this.gridOptions.isPage?a("el-pagination",{attrs:{"current-page":e.pageNo,"page-sizes":e.pageSizes,"page-size":e.pageSize,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.sizeChangeHandle,"current-change":e.currentChangeHandle}}):e._e(),e._v(" "),e.editVisible?a("edit",{ref:"edit",on:{refreshDataList:e.listData}}):e._e(),e._v(" "),e.infoVisible?a("info",{ref:"info"}):e._e()],1)},staticRenderFns:[]},s=a("VU/8")(i,l,!1,null,null,null);t.default=s.exports}});