webpackJsonp([13],{"6dof":function(t,e,a){var r=a("Blfy");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);a("rjj0")("49af1e88",r,!0)},Blfy:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.mod-user-edit .input-bar i {\n  padding-top: 6px;\n  font-size: 24px;\n  color: #3a8ee6;\n  -webkit-transition-property: color;\n  transition-property: color;\n  -webkit-transition-duration: 0.15s;\n          transition-duration: 0.15s;\n  -webkit-transition-timing-function: linear;\n          transition-timing-function: linear;\n  -webkit-transition-delay: initial;\n          transition-delay: initial;\n}\n",""])},cboe:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Gu7T"),o=a.n(r),i=a("Dd8w"),s=a.n(i),n=a("O4Lo"),l=a.n(n),d=a("E4LH"),c={data:function(){var t=this;return{id:null,visible:!1,otherParamsVisible:!1,roleList:[],orgList:[],dataForm:{username:"",password:"",comfirmPassword:"",roleIdList:[],orgIdList:[]},dataFormOrigin:[],dataRule:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{validator:function(e,a,r){var o=t.$query.new();t.$query.toW(o,e.field,a,"EQ"),t.$http.get("/admin/sys-user/exist?query="+encodeURIComponent(t.$query.toJsonStr(o))).then(function(o){var i=o.data;200!==i.code&&r(new Error("服务器异常,校验失败")),a!==t.dataFormOrigin[e.field]&&i.data?r(new Error("已被使用")):r()}).catch(function(){r(new Error("校验失败"))})},trigger:"blur"}],password:[{validator:function(e,a,r){t.id||/\S/.test(a)?r():r(new Error("密码不能为空"))},trigger:"blur"}],comfirmPassword:[{validator:function(e,a,r){t.id||/\S/.test(a)?t.dataForm.password!==a?r(new Error("确认密码与密码输入不一致")):r():r(new Error("确认密码不能为空"))},trigger:"blur"}],email:[{validator:function(t,e,a){e&&!Object(d.a)(e)?a(new Error("邮箱格式错误")):a()},trigger:"blur"}],mob:[{validator:function(t,e,a){e&&!Object(d.b)(e)?a(new Error("手机号格式错误")):a()},trigger:"blur"}]}}},methods:{init:function(t){var e=this;this.dataForm.id=null,this.dataFormOrigin={},this.id=t,this.visible=!0,this.roleList=[],this.orgList=[],this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.id&&e.getInfo(),e.listRole(),e.listOrg()})},getInfo:function(){var t=this;this.$http.json().post("/admin/sys-user/info",{id:this.id}).then(function(e){var a=e.data;if(200!==a.code)return t.$message.error(a.msg);t.dataForm=s()({},t.dataForm,a.data),t.dataFormOrigin=s()({},t.dataFormOrigin,a.data)}).catch(function(){})},listOrg:function(){var t=this;this.$http.get("/sys/org/listUserOrgRtOrgTreeNode",{params:{userId:this.id}}).then(function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.message);t.orgList=a.data.list,t.$nextTick(function(){a.data.checkedKeys.forEach(function(e){return t.$refs.orgListTree.setChecked(e,!0)})})}).catch(function(){})},listRole:function(){var t=this;this.$http.get("/admin/sys-role/list-set",{params:{userId:this.id}}).then(function(e){var a=e.data;if(200!==a.code)return t.$message.error(a.message);t.roleList=a.data.list,t.dataForm.roleIdList=a.data.checkedKeys}).catch(function(){})},dataFormSubmit:l()(function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.dataForm.orgIds=[].concat(o()(t.$refs.orgListTree.getCheckedKeys()),o()(t.$refs.orgListTree.getHalfCheckedKeys())),t.dataForm.roleIds=[].concat(o()(t.dataForm.roleIdList)),t.$http.json().post(t.dataForm.id?"/admin/sys-user/upd":"/admin/sys-user/add",s()({},t.dataForm)).then(function(e){var a=e.data;a&&200===a.code?t.$message({message:"操作成功",type:"success",duration:500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(a.message)}))})},1e3,{leading:!0,trailing:!1})}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"mod-user-edit",attrs:{title:t.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"120px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.dataFormSubmit()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"登录帐号",prop:"username"}},[a("el-input",{attrs:{placeholder:"登录帐号"},model:{value:t.dataForm.username,callback:function(e){t.$set(t.dataForm,"username",e)},expression:"dataForm.username"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"昵称",prop:"nickName"}},[a("el-input",{attrs:{placeholder:"昵称"},model:{value:t.dataForm.nickName,callback:function(e){t.$set(t.dataForm,"nickName",e)},expression:"dataForm.nickName"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"手机号"},model:{value:t.dataForm.phone,callback:function(e){t.$set(t.dataForm,"phone",e)},expression:"dataForm.phone"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[a("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.dataForm.email,callback:function(e){t.$set(t.dataForm,"email",e)},expression:"dataForm.email"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"角色",size:"mini",prop:"roleIdList"}},[a("el-checkbox-group",{model:{value:t.dataForm.roleIdList,callback:function(e){t.$set(t.dataForm,"roleIdList",e)},expression:"dataForm.roleIdList"}},t._l(t.roleList,function(e){return a("el-checkbox",{key:e.id,attrs:{label:e.id}},[t._v(t._s(e.name))])}))],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"组织机构",size:"mini"}},[a("el-tree",{ref:"orgListTree",attrs:{data:t.orgList,props:{label:"nm",children:"children"},"node-key":"id","show-checkbox":""}})],1)],1),t._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"input-bar",attrs:{label:"更多参数"}},[a("i",{directives:[{name:"show",rawName:"v-show",value:!t.otherParamsVisible,expression:"!otherParamsVisible"}],staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.otherParamsVisible=!0}}}),t._v(" "),a("i",{directives:[{name:"show",rawName:"v-show",value:t.otherParamsVisible,expression:"otherParamsVisible"}],staticClass:"el-icon-remove-outline",on:{click:function(e){t.otherParamsVisible=!1}}})])],1)],1),t._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:t.otherParamsVisible,expression:"otherParamsVisible"}],attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"参数1",prop:"arg1"}},[a("el-input",{attrs:{placeholder:"参数1"},model:{value:t.dataForm.arg1,callback:function(e){t.$set(t.dataForm,"arg1",e)},expression:"dataForm.arg1"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"参数2",prop:"arg2"}},[a("el-input",{attrs:{placeholder:"参数2"},model:{value:t.dataForm.arg2,callback:function(e){t.$set(t.dataForm,"arg2",e)},expression:"dataForm.arg2"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"参数3",prop:"arg3"}},[a("el-input",{attrs:{placeholder:"参数3"},model:{value:t.dataForm.arg3,callback:function(e){t.$set(t.dataForm,"arg3",e)},expression:"dataForm.arg3"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"参数4",prop:"arg4"}},[a("el-input",{attrs:{placeholder:"参数4"},model:{value:t.dataForm.arg4,callback:function(e){t.$set(t.dataForm,"arg4",e)},expression:"dataForm.arg4"}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var u=a("VU/8")(c,m,!1,function(t){a("6dof")},null,null);e.default=u.exports}});