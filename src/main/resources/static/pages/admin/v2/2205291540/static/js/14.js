webpackJsonp([14],{"5vuo":function(e,t,a){(e.exports=a("FZ+f")(!1)).push([e.i,"\n.mod-rsco .menu-list .el-input__inner,\n.mod-rsco .menu-list .el-input__suffix,\n.mod-rsco .icon-list .el-input__inner,\n.mod-rsco .icon-list .el-input__suffix {\n  cursor: pointer;\n}\n.mod-rsco-icon-popover {\n  width: 458px;\n  overflow: hidden;\n}\n.mod-rsco-icon-inner {\n  width: 478px;\n  max-height: 258px;\n  overflow-x: hidden;\n  overflow-y: auto;\n}\n.mod-rsco-icon-list {\n  width: 458px;\n  padding: 0;\n  margin: -8px 0 0 -8px;\n}\n.mod-rsco-icon-list > .el-button {\n    padding: 8px;\n    margin: 8px 0 0 8px;\n}\n.mod-rsco-icon-list > .el-button > span {\n      display: inline-block;\n      vertical-align: middle;\n      width: 18px;\n      height: 18px;\n      font-size: 18px;\n}\n",""])},PP7H:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Dd8w"),n=a.n(i),r=a("O4Lo"),o=a.n(r),s=a("0xDb"),l={data:function(){return{id:null,visible:!1,menuListVisible:!1,menuList:[],iconListVisible:!1,iconList:[],dataForm:{id:"",pid:null,name:"",pnm:"",url:"",perm:"",icon:"",seq:0,rmks:"",type:0},dataRule:{pnm:[{required:!0,message:"父主键不能为空",trigger:"blur"}],nm:[{required:!0,message:"名称不能为空",trigger:"blur"}],seq:[{required:!0,message:"排序不能为空",trigger:"blur"}],type:[{required:!0,message:"类型不能为空",trigger:"blur"}]}}},watch:{"dataForm.type":function(e){this.$refs.dataForm.clearValidate()}},methods:{init:function(e){var t=this;this.dataForm.id=null,this.id=e,this.visible=!0,this.dataForm.pnm="",this.$nextTick(function(){t.$refs.dataForm.resetFields(),t.iconList=Object(s.d)(),t.listMenu().then(function(){t.id&&t.getInfo()})})},listMenu:function(){var e=this,t=this.$query.new();return this.$query.toW(t,"type","0, 1","IN"),this.$http.get("/admin/sys-menu/list?query="+this.$query.toEncode(t)).then(function(t){var a=t.data;if(200!==a.code)return e.$message.error(a.message);e.menuList=a.data.result}).catch(function(){})},getInfo:function(){var e=this;this.$http.json().post("/admin/sys-menu/info",{id:this.id}).then(function(t){var a=t.data;return 200!==a.code?e.$message.error(a.message):(e.dataForm=n()({},e.dataForm,a.data),e.dataForm.pid?void e.$refs.menuListTree.setCurrentKey(e.dataForm.pid):e.menuListTreeSetDefaultHandle())}).catch(function(){})},menuListTreeCurrentChangeHandle:function(e){this.dataForm.pid=e.id,this.dataForm.pnm=e.name,this.menuListVisible=!1},menuListTreeSetDefaultHandle:function(){this.dataForm.pid=null,this.dataForm.pnm=""},iconListCurrentChangeHandle:function(e){this.dataForm.icon=e,this.iconListVisible=!1},dataFormSubmit:o()(function(){var e=this;console.log(this.dataForm),this.$refs.dataForm.validate(function(t){if(t){var a=e.id?"/admin/sys-menu/upd":"/admin/sys-menu/add";e.$http.post(a,n()({},e.dataForm)).then(function(t){var a=t.data;a&&200===a.code?e.$message({message:"操作成功",type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}}):e.$message.error(a.message)})}})},1e3,{leading:!0,trailing:!1})}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.id?"修改":"新增","close-on-click-modal":!1,visible:e.visible},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.dataFormSubmit()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-radio-group",{attrs:{disabled:e.id>0},model:{value:e.dataForm.type,callback:function(t){e.$set(e.dataForm,"type",t)},expression:"dataForm.type"}},[a("el-radio",{attrs:{label:0}},[e._v("菜单")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("功能")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("伪菜单")])],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{staticClass:"menu-list",attrs:{prop:"pid",label:"上级菜单"}},[a("el-popover",{ref:"menuListPopover",attrs:{placement:"bottom-start",trigger:"click"},model:{value:e.menuListVisible,callback:function(t){e.menuListVisible=t},expression:"menuListVisible"}},[a("el-tree",{ref:"menuListTree",attrs:{data:e.menuList,props:{label:"name",children:"children"},"node-key":"id","highlight-current":!0,"expand-on-click-node":!1,accordion:""},on:{"current-change":e.menuListTreeCurrentChangeHandle}})],1),e._v(" "),a("el-input",{directives:[{name:"popover",rawName:"v-popover:menuListPopover",arg:"menuListPopover"}],attrs:{readonly:!0,placeholder:"上级菜单"},model:{value:e.dataForm.pnm,callback:function(t){e.$set(e.dataForm,"pnm",t)},expression:"dataForm.pnm"}},[e.dataForm.pid?a("i",{staticClass:"el-icon-circle-close el-input__icon",attrs:{slot:"suffix"},on:{click:function(t){t.stopPropagation(),e.menuListTreeSetDefaultHandle()}},slot:"suffix"}):e._e()])],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"名称"},model:{value:e.dataForm.name,callback:function(t){e.$set(e.dataForm,"name",t)},expression:"dataForm.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"排序",prop:"seq"}},[a("el-input-number",{attrs:{min:1,max:1e4,label:"排序"},model:{value:e.dataForm.seq,callback:function(t){e.$set(e.dataForm,"seq",t)},expression:"dataForm.seq"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:22}},[1===e.dataForm.type?a("el-form-item",{attrs:{label:"资源路径",prop:"url"}},[a("el-input",{attrs:{placeholder:"资源路径"},model:{value:e.dataForm.url,callback:function(t){e.$set(e.dataForm,"url",t)},expression:"dataForm.url"}})],1):e._e()],1),e._v(" "),2!==e.dataForm.type?a("el-col",{attrs:{span:22}},[a("el-form-item",{attrs:{label:"权限标识",prop:"perm"}},[a("el-input",{attrs:{placeholder:"权限标识"},model:{value:e.dataForm.perm,callback:function(t){e.$set(e.dataForm,"perm",t)},expression:"dataForm.perm"}})],1)],1):e._e(),e._v(" "),0===e.dataForm.type?a("el-col",{attrs:{span:11}},[a("el-form-item",{staticClass:"icon-list",attrs:{prop:"icon",label:"图标"}},[a("el-popover",{ref:"iconListPopover",attrs:{placement:"bottom-start",trigger:"click","popper-class":"mod-rsco-icon-popover"},model:{value:e.iconListVisible,callback:function(t){e.iconListVisible=t},expression:"iconListVisible"}},[a("div",{staticClass:"mod-rsco-icon-inner"},[a("div",{staticClass:"mod-rsco-icon-list"},e._l(e.iconList,function(t,i){return a("el-button",{key:i,class:{"is-active":e.dataForm.icon===t},on:{click:function(a){e.iconListCurrentChangeHandle(t)}}},[a("svg",{staticClass:"icon-svg",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#"+t}})])])}))])]),e._v(" "),a("el-input",{directives:[{name:"popover",rawName:"v-popover:iconListPopover",arg:"iconListPopover"}],attrs:{readonly:!0,placeholder:"图标"},model:{value:e.dataForm.icon,callback:function(t){e.$set(e.dataForm,"icon",t)},expression:"dataForm.icon"}})],1)],1):e._e(),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"备注",prop:"remark"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:e.dataForm.remark,callback:function(t){e.$set(e.dataForm,"remark",t)},expression:"dataForm.remark"}})],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.visible=!1}}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dataFormSubmit()}}},[e._v("确定")])],1)],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(e){a("Yhxd")},null,null);t.default=c.exports},Yhxd:function(e,t,a){var i=a("5vuo");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("157f3223",i,!0)}});