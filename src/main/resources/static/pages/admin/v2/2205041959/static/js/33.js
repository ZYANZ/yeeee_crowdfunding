webpackJsonp([33],{uqmC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("Dd8w"),i=a.n(r),o=a("O4Lo"),n={data:function(){var t=this,e=function(e,a,r){var i=t.$query.new();t.$query.toW(i,e.field,a,"EQ"),t.$http.get("test/a/hasExist?query="+encodeURIComponent(t.$query.toJsonStr(i))).then(function(i){var o=i.data;0!==o.code&&r(new Error("服务器异常,校验失败")),a!==t.dataFormOrigin[e.field]&&o.data?r(new Error("已被使用")):r()}).catch(function(){r(new Error("校验失败"))})};return{id:null,visible:!1,dataForm:{id:"",cId:"",bId:"",aId:"",tntId:""},dataFormOrigin:[],dataRule:{id:[{required:!0,message:"主键不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],cId:[{required:!0,message:"c主键不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],bId:[{required:!0,message:"b主键不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],aId:[{required:!0,message:"a主键不能为空",trigger:"blur"},{validator:e,trigger:"blur"}],tntId:[{required:!0,message:"租户主键不能为空",trigger:"blur"},{validator:e,trigger:"blur"}]}}},methods:{init:function(t){var e=this;this.id=t,this.visible=!0,this.$nextTick(function(){e.$refs.dataForm.resetFields(),e.id&&e.getInfo()})},getInfo:function(){var t=this;this.$http.get("/test/a/info/"+this.id).then(function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.msg);t.dataForm=i()({},t.dataForm,a.data),t.dataFormOrigin=i()({},t.dataFormOrigin,a.data)}).catch(function(){})},dataFormSubmit:a.n(o)()(function(){var t=this;this.$refs.dataForm.validate(function(e){if(e){var a=t.id?"/test/a/upd":"/test/a/add";t.$http.post(a,i()({},t.dataForm)).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(a.msg)})}})},1e3,{leading:!0,trailing:!1})}},l={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"mod-a-edit",attrs:{title:t.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"120px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.dataFormSubmit()}}},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"主键",prop:"id"}},[a("el-input-number",{attrs:{min:1,label:"主键"},model:{value:t.dataForm.id,callback:function(e){t.$set(t.dataForm,"id",e)},expression:"dataForm.id"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"c主键",prop:"cId"}},[a("el-input-number",{attrs:{min:1,label:"c主键"},model:{value:t.dataForm.cId,callback:function(e){t.$set(t.dataForm,"cId",e)},expression:"dataForm.cId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"b主键",prop:"bId"}},[a("el-input-number",{attrs:{min:1,label:"b主键"},model:{value:t.dataForm.bId,callback:function(e){t.$set(t.dataForm,"bId",e)},expression:"dataForm.bId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"a主键",prop:"aId"}},[a("el-input-number",{attrs:{min:1,label:"a主键"},model:{value:t.dataForm.aId,callback:function(e){t.$set(t.dataForm,"aId",e)},expression:"dataForm.aId"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"租户主键",prop:"tntId"}},[a("el-input-number",{attrs:{min:1,label:"租户主键"},model:{value:t.dataForm.tntId,callback:function(e){t.$set(t.dataForm,"tntId",e)},expression:"dataForm.tntId"}})],1)],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},d=a("VU/8")(n,l,!1,null,null,null);e.default=d.exports}});