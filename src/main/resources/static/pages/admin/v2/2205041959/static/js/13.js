webpackJsonp([13],{"6dof":function(t,a,e){var r=e("Blfy");"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);e("rjj0")("49af1e88",r,!0)},Blfy:function(t,a,e){(t.exports=e("FZ+f")(!1)).push([t.i,"\n.mod-user-edit .input-bar i {\n  padding-top: 6px;\n  font-size: 24px;\n  color: #3a8ee6;\n  -webkit-transition-property: color;\n  transition-property: color;\n  -webkit-transition-duration: 0.15s;\n          transition-duration: 0.15s;\n  -webkit-transition-timing-function: linear;\n          transition-timing-function: linear;\n  -webkit-transition-delay: initial;\n          transition-delay: initial;\n}\n",""])},cboe:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=e("Gu7T"),o=e.n(r),s=e("Dd8w"),i=e.n(s),l=e("O4Lo"),n=e.n(l),d=e("E4LH"),c={data:function(){var t=this;return{id:null,visible:!1,otherParamsVisible:!1,roleList:[],orgList:[],dataForm:{username:"",password:"",comfirmPassword:"",roleIdList:[],orgIdList:[]},dataFormOrigin:[],dataRule:{username:[{required:!0,message:"用户名不能为空",trigger:"blur"},{validator:function(a,e,r){var o=t.$query.new();t.$query.toW(o,a.field,e,"EQ"),t.$http.get("/sys/user/hasExist?query="+encodeURIComponent(t.$query.toJsonStr(o))).then(function(o){var s=o.data;0!==s.code&&r(new Error("服务器异常,校验失败")),e!==t.dataFormOrigin[a.field]&&s.data?r(new Error("已被使用")):r()}).catch(function(){r(new Error("校验失败"))})},trigger:"blur"}],password:[{validator:function(a,e,r){t.id||/\S/.test(e)?r():r(new Error("密码不能为空"))},trigger:"blur"}],comfirmPassword:[{validator:function(a,e,r){t.id||/\S/.test(e)?t.dataForm.password!==e?r(new Error("确认密码与密码输入不一致")):r():r(new Error("确认密码不能为空"))},trigger:"blur"}],email:[{validator:function(t,a,e){a&&!Object(d.a)(a)?e(new Error("邮箱格式错误")):e()},trigger:"blur"}],mob:[{validator:function(t,a,e){a&&!Object(d.b)(a)?e(new Error("手机号格式错误")):e()},trigger:"blur"}]}}},methods:{init:function(t){var a=this;this.id=t,this.visible=!0,this.roleList=[],this.orgList=[],this.$nextTick(function(){a.$refs.dataForm.resetFields(),a.id&&a.getInfo(),a.listRole(),a.listOrg()})},getInfo:function(){var t=this;this.$http.get("/sys/user/info/"+this.id).then(function(a){var e=a.data;if(0!==e.code)return t.$message.error(e.msg);t.dataForm=i()({},t.dataForm,e.data),t.dataFormOrigin=i()({},t.dataFormOrigin,e.data)}).catch(function(){})},listOrg:function(){var t=this;this.$http.get("/sys/org/listUserOrgRtOrgTreeNode",{params:{userId:this.id}}).then(function(a){var e=a.data;if(0!==e.code)return t.$message.error(e.message);t.orgList=e.data.list,t.$nextTick(function(){e.data.checkedKeys.forEach(function(a){return t.$refs.orgListTree.setChecked(a,!0)})})}).catch(function(){})},listRole:function(){var t=this;this.$http.get("/sys/role/listUserRoleRtRoleNode",{params:{userId:this.id}}).then(function(a){var e=a.data;if(0!==e.code)return t.$message.error(e.msg);t.roleList=e.data.list,t.dataForm.roleIdList=e.data.checkedKeys}).catch(function(){})},dataFormSubmit:n()(function(){var t=this;this.$refs.dataForm.validate(function(a){a&&(t.dataForm.orgIdList=[].concat(o()(t.$refs.orgListTree.getCheckedKeys()),o()(t.$refs.orgListTree.getHalfCheckedKeys())),t.dataForm.roleIdList=[].concat(o()(t.dataForm.roleIdList)),t.$http.post(t.dataForm.id?"/sys/user/upd":"/sys/user/add",i()({},t.dataForm)).then(function(a){var e=a.data;e&&0===e.code?t.$message({message:"操作成功",type:"success",duration:500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(e.msg)}))})},1e3,{leading:!0,trailing:!1})}},m={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{staticClass:"mod-user-edit",attrs:{title:t.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(a){t.visible=a}}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"120px"},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key))return null;t.dataFormSubmit()}}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"登录帐号",prop:"username"}},[e("el-input",{attrs:{placeholder:"登录帐号"},model:{value:t.dataForm.username,callback:function(a){t.$set(t.dataForm,"username",a)},expression:"dataForm.username"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{class:{"is-required":!t.id},attrs:{label:"密码",prop:"password"}},[e("el-input",{attrs:{type:"password",placeholder:"密码"},model:{value:t.dataForm.password,callback:function(a){t.$set(t.dataForm,"password",a)},expression:"dataForm.password"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"昵称",prop:"nickname"}},[e("el-input",{attrs:{placeholder:"昵称"},model:{value:t.dataForm.nickname,callback:function(a){t.$set(t.dataForm,"nickname",a)},expression:"dataForm.nickname"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{class:{"is-required":!t.id},attrs:{label:"确认密码",prop:"comfirmPassword"}},[e("el-input",{attrs:{type:"password",placeholder:"确认密码"},model:{value:t.dataForm.comfirmPassword,callback:function(a){t.$set(t.dataForm,"comfirmPassword",a)},expression:"dataForm.comfirmPassword"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"手机号",prop:"mob"}},[e("el-input",{attrs:{placeholder:"手机号"},model:{value:t.dataForm.mob,callback:function(a){t.$set(t.dataForm,"mob",a)},expression:"dataForm.mob"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[e("el-input",{attrs:{placeholder:"邮箱"},model:{value:t.dataForm.email,callback:function(a){t.$set(t.dataForm,"email",a)},expression:"dataForm.email"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"角色",size:"mini",prop:"roleIdList"}},[e("el-checkbox-group",{model:{value:t.dataForm.roleIdList,callback:function(a){t.$set(t.dataForm,"roleIdList",a)},expression:"dataForm.roleIdList"}},t._l(t.roleList,function(a){return e("el-checkbox",{key:a.id,attrs:{label:a.id}},[t._v(t._s(a.nm))])}))],1)],1),t._v(" "),e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"组织机构",size:"mini"}},[e("el-tree",{ref:"orgListTree",attrs:{data:t.orgList,props:{label:"nm",children:"children"},"node-key":"id","show-checkbox":""}})],1)],1),t._v(" "),e("el-col",{attrs:{span:6}},[e("el-form-item",{staticClass:"input-bar",attrs:{label:"更多参数"}},[e("i",{directives:[{name:"show",rawName:"v-show",value:!t.otherParamsVisible,expression:"!otherParamsVisible"}],staticClass:"el-icon-circle-plus-outline",on:{click:function(a){t.otherParamsVisible=!0}}}),t._v(" "),e("i",{directives:[{name:"show",rawName:"v-show",value:t.otherParamsVisible,expression:"otherParamsVisible"}],staticClass:"el-icon-remove-outline",on:{click:function(a){t.otherParamsVisible=!1}}})])],1)],1),t._v(" "),e("el-row",{directives:[{name:"show",rawName:"v-show",value:t.otherParamsVisible,expression:"otherParamsVisible"}],attrs:{gutter:20}},[e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数1",prop:"arg1"}},[e("el-input",{attrs:{placeholder:"参数1"},model:{value:t.dataForm.arg1,callback:function(a){t.$set(t.dataForm,"arg1",a)},expression:"dataForm.arg1"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数2",prop:"arg2"}},[e("el-input",{attrs:{placeholder:"参数2"},model:{value:t.dataForm.arg2,callback:function(a){t.$set(t.dataForm,"arg2",a)},expression:"dataForm.arg2"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数3",prop:"arg3"}},[e("el-input",{attrs:{placeholder:"参数3"},model:{value:t.dataForm.arg3,callback:function(a){t.$set(t.dataForm,"arg3",a)},expression:"dataForm.arg3"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数4",prop:"arg4"}},[e("el-input",{attrs:{placeholder:"参数4"},model:{value:t.dataForm.arg4,callback:function(a){t.$set(t.dataForm,"arg4",a)},expression:"dataForm.arg4"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数5",prop:"arg5"}},[e("el-input",{attrs:{placeholder:"参数5"},model:{value:t.dataForm.arg5,callback:function(a){t.$set(t.dataForm,"arg5",a)},expression:"dataForm.arg5"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数6",prop:"arg6"}},[e("el-input",{attrs:{placeholder:"参数6"},model:{value:t.dataForm.arg6,callback:function(a){t.$set(t.dataForm,"arg6",a)},expression:"dataForm.arg6"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数7",prop:"arg7"}},[e("el-input",{attrs:{placeholder:"参数7"},model:{value:t.dataForm.arg7,callback:function(a){t.$set(t.dataForm,"arg7",a)},expression:"dataForm.arg7"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数8",prop:"arg8"}},[e("el-input",{attrs:{placeholder:"参数8"},model:{value:t.dataForm.arg8,callback:function(a){t.$set(t.dataForm,"arg8",a)},expression:"dataForm.arg8"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:11}},[e("el-form-item",{attrs:{label:"参数9",prop:"arg9"}},[e("el-input",{attrs:{placeholder:"参数9"},model:{value:t.dataForm.arg9,callback:function(a){t.$set(t.dataForm,"arg9",a)},expression:"dataForm.arg9"}})],1)],1)],1)],1),t._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(a){t.visible=!1}}},[t._v("取消")]),t._v(" "),e("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var u=e("VU/8")(c,m,!1,function(t){e("6dof")},null,null);a.default=u.exports}});